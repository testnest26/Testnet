<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TestNest</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6ff;
  text-align:center;
}
.container{
  margin-top:100px;
}
.card{
  background:white;
  padding:30px;
  border-radius:16px;
  width:320px;
  margin:auto;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}
button{
  padding:14px 24px;
  font-size:16px;
  font-weight:bold;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin-top:20px;
}
.login-btn{
  background:#4f46e5;
  color:white;
}
.logout-btn{
  background:#ef4444;
  color:white;
}
</style>
</head>

<body>

<div class="container">

  <div class="card" id="loginCard">
    <h2>Welcome to TestNest</h2>
    <p>Login to continue</p>
    <button class="login-btn" onclick="login()">Login with Google</button>
  </div>

  <div class="card" id="appCard" style="display:none;">
    <h2 id="userName"></h2>
    <p>You are logged in successfully.</p>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAPML8zK9qgRQbUyv7lMVOtt0c5Osjyw_A",
  authDomain:"testnest-education.firebaseapp.com",
  projectId:"testnest-education",
  appId:"1:1000142199756:web:afab8eaa0f6bc638969b69"
});

const auth = firebase.auth();

/* Handle redirect result */
auth.getRedirectResult().catch(console.error);

function login(){
  const provider = new firebase.auth.GoogleAuthProvider();
  provider.setCustomParameters({prompt:"select_account"});
  auth.signInWithRedirect(provider);
}

function logout(){
  auth.signOut();
}

auth.onAuthStateChanged(user=>{
  if(user){
    document.getElementById("loginCard").style.display="none";
    document.getElementById("appCard").style.display="block";
    document.getElementById("userName").innerText =
      "Hello, " + (user.displayName || "Student");
  }else{
    document.getElementById("loginCard").style.display="block";
    document.getElementById("appCard").style.display="none";
  }
});
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}
</script>

</body>
</html>
